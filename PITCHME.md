# 挫折しないVim入門

Shintaro TANAKA

---

📝 テキストエディタにこだわってますか？ 📝

+++

#### 人類はテキストエディタからは逃れられない

- あらゆる業種にPC作業が伴う |
    - キーボード入力は必須技能 |
    - もちろん早いほうがベター |
- 大工にとっての工具 = プログラマにとってのテキストエディタ |
    - 道具にこだわりをもってテキストエディットしよう！！ |

---

## 弘法筆を選ばず?

技術があれば道具の優劣に左右されないこと

+++

#### 「弘法筆を選ばず」の本当の意味

<img style="height: 40%;" src="assets/nigaoe_kuukai.png">

- 君たちは弘法じゃないから道具にこだわりを持とうな！！ |

---

#### テキストエディタにこだわりを持つと起こる変化

👍 PROS

- 退屈な作業でもテキストを打つこと自体が楽しくなる |
- あらゆる作業において入力はボトルネックなので効率が上がる |

👎 CONS

- ないです |

---

## やるしかない!!

---

### じゃあテキストエディタ何使えばいいの？

+++

最終目的: 様々な環境で統一感のある作業をする

- 時代は移り変わる |
    - 10数年前 VSCode とか Atom とか SublimeText とかない |
- **キーバインド** を覚える + エディタのキーバインド変えるプラグイン使うのが汎用性が高い |
- じゃあ何のエディタのキーバインド覚えるのがいいのか？ |

---

## Vim

<img src="assets/logo.png">

+++

#### Vimの特徴

- あまりに特殊なカーソル移動 |
- あまりに特殊な入力方法 |
- 終了・保存 にもコマンド打つ必要がある |
- 習得難易度が高いと思われがち |
- でも著名なプログラマが使ってるの見るとちょっと憧れる |

---

## Vim覚えようとして挫折した経験ある人✋

---

### 挫折の理由

- 覚えるまで仕事に影響出ちゃうし |
- なんとなくチートシート印刷してみたけどメリットがよくわからん |
- メリットの理解が不十分だとモチベ維持が難しい |

---

### 明確にしておく

新しく何かをやるときのコツ メリデメ & 期間を考える

- 現状の入力と同程度の編集ができるようになるまで、最長でどの程度かかるか？ |
- キーボードから手を離さなくてよくなる以上のメリットとは何か？ |
- メリットが享受できるようになるまで最長でどの程度かかるか？ |

---

1ヶ月でVim完全習得ロードマップ

- 1週目間(ここで今までの作業スピードを超える)
    - [キーリピート](https://qiita.com/seteen/items/5698089808612f6b87e0)の速度変える
    - JetBrains系のIDEのプラグイン `IdeaVim` の導入
    - `hjkl(移動)`, `x(一文字削除)`, インサートモード⇔ノーマルモードの遷移, `u/Ctrl+R(アンドゥ・リドゥ)`
- 2-4週目(ここからVim特有のメリット享受できる)
    - `w / b(単語単位での移動)` 、 `dc (オペレータ)` と.コマンド
    - `dd(行削除)`, `yy(行コピー)`, `p(ペースト)`
    - いろんなインサートモードへの遷移の仕方、画面単位での行移動、etc

---

## 1週目(準備)

+++

### キーリピートの速度変える

Vimに限らずすべての作業が早くなるのでオススメ

- InitialKeyRepeat
    - 「キーが押し続けられている」と認識するまでの時間
- KeyRepeat
    - 文字が繰り返し入力される感覚

```sh
defaults write -g InitialKeyRepeat -int 12 # normal minimum is 15 (225 ms)
defaults write -g KeyRepeat -int 1 # normal minimum is 2 (30 ms)
```

+++

### JetBrains系のIDEのプラグイン `IdeaVim` の導入

<img src="assets/ideavim.png">

---

## 1週目に覚えるVim基礎

+++

### これだけ覚える モード

<img style="width: 45%;" src="assets/mode.png">


+++

| キーボード操作| 機能|
|:-----------|:------------|
| ノーマルモードで `i` | インサートモードに遷移 |
| ノーマルモードで `:(コロン)` | コマンドモードに遷移 |
| ノーマルモードで `v` | 選択モードに遷移 |
| ノーマルモードで `V` | 行選択モードに遷移 |
| ノーマルモードで `Ctrl + V` | 矩形選択モードに遷移 |
| `Esc`/`Ctrl + [` | ノーマルモードに遷移 |

+++

### 素振りをする

- Normalモードがすべて中心
- 「何かする」 ⇔ 「Normalモードに遷移」を手になじませる
- Ecsは遠いしTouchBarがゴミなので `Ctrl + [` がオススメ
    - CapsをCtrlにしてない場合その設定もしておく

+++

### これだけ覚える カウントとモーション

- モーション…ノーマルモードでカーソルを移動
- カウント… `{数値}{モーション}` で、モーションを数値分繰り返す

+++

| キーボード操作| 機能|
|:-----------|:------------|
| h | 左にカーソル移動 |
| j | 下にカーソル移動 |
| k | 上にカーソル移動 |
| l (エル) | 右にカーソル移動 |
| w | 次の単語の先頭にカーソル移動 |
| b | 前の単語の先頭にカーソル移動 |
| $ | 行末にカーソル移動|
| ^ | 論理行頭にカーソル移動|

+++

### これだけ覚える アンドゥ・リドゥ・一文字削除

- 取り消し覚えておくと安心感が全然違ってくる
- BackSpaceに匹敵するxも覚えておく

| キーボード操作| 機能|
|:-----------|:------------|
| u | アンドゥ(取り消し) |
| R | リドゥ(取り消しの取り消し) |
| x | カーソル下の一文字を削除 |

+++

#### 余談: 日常にあふれるVimのキーバインドに触れる

| サービス名| コマンド|
|:-----------|:------------|
| Twitter | j / k |
| Facebook | j / k |
| Google日本語入力 | <全角入力で>zh zj zk zl|

---

## 2週目以降に覚えるVim基礎

+++

### これだけ覚える オペレータ

- オペレータ…`{オペレータ}{モーション}` で操作をする
- d, y については `dd`, `yy` で行に対して適用可能

+++

| キーボード操作| 機能|
|:-----------|:------------|
| d | 削除 |
| y | ヤンク(コピー) |
| c | 変更(範囲を削除してインサートモードに入ること) |

+++

## Vimの真髄

+++

### テキストオブジェクト

- `{オペレータ}{テキストオブジェクト}`
    - 通常のエディタでは扱えない `範囲` を操作できる
    - 例えば`()`とか`""`の中だけのテキストとか

+++

| キーボード操作| 機能|
|:-----------|:------------|
| iw | カーソル下の単語 |
| aw | カーソル下の単語 |
| i( | ()で囲われたテキスト |
| i" | 'で囲われたテキスト |
| a( | ()で囲われたテキスト(()含む) |
| a" | 'で囲われたテキスト(""含む) |

+++

### .(ドット)コマンド

- `.(ドット)` を押すことで直前の変更を繰り返すことができる
- 直前の変更
    - 何か消すとか
    - インサートモード入ってから出るまでとか

---

実践

---

これだけ覚えてあなたもVimmer！

ご清聴ありがとうございました

<br/>

以下付録: Vimを覚えるときに参考にする情報源

---

付録: Vimを覚えるときに参考にする情報源

+++

- vimtutor
- vim-jp Slackグループ
- 実践Vim 思考の速度で編集しよう

+++

vimtutor

- こんなスライドよりまずこれやるべき
- Vim入れるとついてくる
- 日本語訳: mattn, 監修: kaoriya

```sh
$ vimtutor
```

+++

実践Vim 思考の速度で編集しよう

<div style="float: left; width: 45%;">
    <img src="https://images-fe.ssl-images-amazon.com/images/I/51c5qMHV5VL.jpg">
</div>
<br/>
<div style="float: right; width: 55%;">
    <ul>
        <li>こんなスライドよりまずこれやるべき</li>
        <li>紙だとプレミア付いてるけどKindleで買えるMac版Kindle見ながらやるのが勉強するのがオススメ</li>
    </ul>
</div>
